{
    "contents" : "setwd(\"C:/EDS/DSS/GetandCleanData/UCIHARProject\")\n## first analyse test data set because it is smaller\n## 3 files in test\n## smallest first; subject_test.txt\n## contains id of the subjects\nsubjects <- readLines(\"subject_test.txt\")\nstr(subjects)\nprint(table(subjects))\n##retruns the following:\n##chr [1:2947] \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" \"2\" ...\n##subjects\n##10  12  13  18   2  20  24   4   9 \n##294 320 327 364 302 354 381 317 288 \n##Second smallest y test\ny <- readLines(\"y_test.txt\")\nstr(y)\nprint(table(y))\n##retruns the following:\n## chr [1:2947] \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" \"5\" ...\n## y\n## 1   2   3   4   5   6 \n## 496 471 420 491 532 53\n\n## third file is the dataset\nx <- read.table(\"x_test.txt\", header = F)\ndim(x)\nsummary(x[1:3])\n## [1] 2947  561\n##       V1                V2                 V3          \n## Min.   :-0.5920   Min.   :-0.36288   Min.   :-0.57618  \n## 1st Qu.: 0.2621   1st Qu.:-0.02496   1st Qu.:-0.12116  \n## Median : 0.2771   Median :-0.01697   Median :-0.10846  \n## Mean   : 0.2740   Mean   :-0.01786   Mean   :-0.10839  \n## 3rd Qu.: 0.2881   3rd Qu.:-0.01014   3rd Qu.:-0.09712  \n## Max.   : 0.6719   Max.   : 0.24611   Max.   : 0.49411 \n\n\n## names of variables aka features\n\nfeatures <- readLines(\"features.txt\")\nstr(features)\n\n## read the x data with the variable names\n\nx <- read.table(\"x_test.txt\", header = F, col.names = features)\nstr(x[1:3])\n## returns\n##'data.frame':  2947 obs. of  3 variables:\n## $ X1.tBodyAcc.mean...X: num  0.257 0.286 0.275 0.27 0.275 ...\n## $ X2.tBodyAcc.mean...Y: num  -0.0233 -0.0132 -0.0261 -0.0326 -0.0278 ...\n## $ X3.tBodyAcc.mean...Z: num  -0.0147 -0.1191 -0.1182 -0.1175 -0.1295 ...\n\n## find the labels for the activities\n\nactivities <- read.table(\"activity_labels.txt\", header = F, col.names = c(\"Activity\", \"ActLabel\"))\nactivities$Activity <-as.factor(activities$Activity)\n## activties contains:\n##   V1                 V2\n## 1  1            WALKING\n## 2  2   WALKING_UPSTAIRS\n## 3  3 WALKING_DOWNSTAIRS\n## 4  4            SITTING\n## 5  5           STANDING\n## 6  6             LAYING\nactlabels = as.character(activities$V2)\nstr(actlabels)\n## returns\n## chr [1:6] \"WALKING\" \"WALKING_UPSTAIRS\" \"WALKING_DOWNSTAIRS\" \"SITTING\" \"STANDING\" \"LAYING\"\n\n## add subjects and activity variables to test and train (2 extra columns)\nTst <-  data.frame(Subject = as.integer(subjects), Activity = y, x)\nTst[45:47,1:4]\n\n## returns:\n##    Subject Activity X1.tBodyAcc.mean...X X2.tBodyAcc.mean...Y\n## 45       2        4            0.2854029          0.002355779\n## 46       2        4            0.2704725         -0.008937364\n## 47       2        4            0.2802245         -0.028037933\n\n## now do the same for train \n\nsubjects <- readLines(\"subject_train.txt\")\ny <- readLines(\"y_train.txt\")\nx <- read.table(\"x_train.txt\", header = F,col.names = features)\n\nHar <-  data.frame(Subject = as.integer(subjects), Activity = y, x)\nHar[45:47,1:4]\n\n## returns\n## as.integer.subjects. Activity X1.tBodyAcc.mean...X X2.tBodyAcc.mean...Y\n## 45                    1        4            0.2785991          -0.01991014\n## 46                    1        4            0.2732814          -0.01112721\n## 47                    1        4            0.2785381          -0.01617343\n\n\n## Merges the training and the test sets to create one data set.\n## append Tst to Har using dplyr package\nlibrary(dplyr)\ndim(Har)\n## returns\n## [1] 7352  563\nHar <- bind_rows(Har,Tst)\ndim(Har)\n## returns\n## [1] 10299   563\n\n\n## Extracts only the measurements on the mean and standard deviation for each measurement. \n## using dplyr package select, inlcude . in contains to remove functions using mean and std\nHar <- select(Har,1:2, contains(\".mean.\"), contains(\".std.\"))\n\n## Uses descriptive activity names to name the activities in the data set\nHar <- left_join(Har, activities, by = \"Activity\")\nHar <- mutate(Har,Activity = ActLabel)\nHar <- select(Har, -ActLabel)\nHar[1:3,1:6]\n##returns \n## Source: local data frame [3 x 6]\n## \n## as.integer.subjects. Activity X1.tBodyAcc.mean...X X2.tBodyAcc.mean...Y X3.tBodyAcc.mean...Z X41.tGravityAcc.mean...X\n## (int)   (fctr)                (dbl)                (dbl)                (dbl)                    (dbl)\n## 1                    1 STANDING            0.2885845          -0.02029417           -0.1329051                0.9633961\n## 2                    1 STANDING            0.2784188          -0.01641057           -0.1235202                0.9665611\n## 3                    1 STANDING            0.2796531          -0.01946716           -0.1134617                0.9668781\n\n\n## 4. Appropriately labels the data set with descriptive variable names.\n## remove the Xnnn. from column names\nCols = colnames(Har)\nCols[-(1:2)] = substr(gsub(\"^.*?[.]\",\"[.]\",Cols[-(1:2)]),4, stop=100L)\n## replace ... with _ , .. with and , . with _\nCols = gsub(\"[.][.][.]\",\"_\", Cols)\nCols = gsub(\"[.][.]\",\"_\", Cols)\nCols = gsub(\"[.]\",\"_\", Cols)\n\n## update the col names in the data frame\n            \ncolnames(Har) <- Cols\nView(Har)            \n            \n## From the data set obtained before, create a second, independent tidy data set \n## with the average of each variable for each activity and each subject\n\nHar <- group_by(Har, Subject, Activity)\nHar <- summarise_each(Har, funs(mean))\nView(Har)\n\n## write to csv\n\nwrite.table(Har, file =\"TidyUCIHAR.txt\", row.names = F )\n\n",
    "created" : 1442844350814.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3111221804",
    "id" : "77BDD52",
    "lastKnownWriteTime" : 1442345239,
    "path" : "C:/EDS/DSS/GetandCleanData/UCIHARProject/ExploratoryAnalysis.R",
    "project_path" : "ExploratoryAnalysis.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}